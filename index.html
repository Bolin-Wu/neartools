<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Practice the DRY principle. The goal of this project is to make the daily repetitive work easier.">
<title>Useful Tools for Daily NEAR Work Tasks • neartools</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Useful Tools for Daily NEAR Work Tasks">
<meta property="og:description" content="Practice the DRY principle. The goal of this project is to make the daily repetitive work easier.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">neartools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Bolin-Wu/neartools/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<p><img src="reference/figures/country_map.jpeg"><!-- --></p>
<p><img src="reference/figures/project_map_movie.gif"><!-- --></p>
<div class="section level1">
<div class="page-header"><h1 id="motivation">Motivation<a class="anchor" aria-label="anchor" href="#motivation"></a>
</h1></div>
<p>There are many repetitive works when doing data harmonization and keeping track of communication with database managers and researchers.</p>
<p>The goal of this package is to practice the “don’t repeat yourself” (DRY) principle, making the daily work more handy.</p>
</div>
<div class="section level1">
<h1 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h1>
<p>You can install the development version of neartools from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"Bolin-Wu/neartools"</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="example-data">Example data<a class="anchor" aria-label="anchor" href="#example-data"></a>
</h1>
<p>This package contains example data sets to test the functions.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Bolin-Wu/neartools" class="external-link">neartools</a></span><span class="op">)</span></span>
<span><span class="co"># read data</span></span>
<span><span class="va">fake_snack_df</span> <span class="op">&lt;-</span> <span class="va">fake_snack_df</span></span>
<span><span class="va">fake_caide_df</span> <span class="op">&lt;-</span> <span class="va">fake_caide_df</span></span>
<span><span class="va">df_dup_id</span> <span class="op">&lt;-</span> <span class="va">df_dup_id</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="r-markdown-templates">R markdown templates<a class="anchor" aria-label="anchor" href="#r-markdown-templates"></a>
</h1>
<ul>
<li>
<code>get_pretty_template</code>: Automatically create &amp; open an rmd file with a nice looking template. This facilitates the communication with researchers &amp; tracking the records. User can choose output file to be word”, “pdf” or “html”. By default it complies an “word” file.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create &amp; open a rmd file</span></span>
<span><span class="fu"><a href="reference/get_pretty_template.html">get_pretty_template</a></span><span class="op">(</span></span>
<span>  subDir <span class="op">=</span> <span class="st">"Enquiry/db"</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"Data_inspection_db"</span>,</span>
<span>  output_file <span class="op">=</span> <span class="st">"word"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="data-inspection">Data inspection<a class="anchor" aria-label="anchor" href="#data-inspection"></a>
</h1>
<ul>
<li>
<code>get_label_df</code>: Get the labels of a data frame. By filtering on the result, the users can quickly select the interested variables and check their missing value percentages.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the label of SPSS and STATA files imported in R</span></span>
<span><span class="va">label_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_label_df.html">get_label_df</a></span><span class="op">(</span>df_w_label <span class="op">=</span> <span class="va">fake_snack_df</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>
<code>get_date_digit</code>: Inspect date in numeric digit form. Filter dates not having required form.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the date digits and find wrong ones</span></span>
<span><span class="fu"><a href="reference/get_date_digit.html">get_date_digit</a></span><span class="op">(</span></span>
<span>  df_arg <span class="op">=</span> <span class="va">fake_snack_df</span>,</span>
<span>  id_string <span class="op">=</span> <span class="st">"Lop"</span>,</span>
<span>  date_string <span class="op">=</span> <span class="st">"numeric_date"</span>,</span>
<span>  required_digits <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  required_leading_num <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
<ul>
<li>
<code>get_all_colnames</code>: Gather multiple data files and examine their columns’ names, labels and missing value percentages together.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get columns of all interested data files</span></span>
<span><span class="va">df_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fake_snack_df"</span>, <span class="st">"fake_caide_df"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/get_all_colnames.html">get_all_colnames</a></span><span class="op">(</span>df_name <span class="op">=</span> <span class="va">df_files</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>
<code>get_dup_id</code>: Check existence of ID duplication and pinpoint them.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check ID duplication</span></span>
<span><span class="fu"><a href="reference/get_dup_id.html">get_dup_id</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">df_dup_id</span>, id_str <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>
<code>get_diff_cols</code>: Compare the two records with the same ID, find the columns with different values.
<ul>
<li>It is useful for deciding which row to keep when we find there are duplicated IDs (e.g. after using <code><a href="reference/get_dup_id.html">get_dup_id()</a></code>).<br>
</li>
<li>This function conquers the problem ‘NA’ values when comparing the columns. Most available functions by default returns ‘NA’ as long as there is any missing value in the columns. However, we also want to know the columns that one record gives “NA” and the other has values.</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># find duplicared IDs</span></span>
<span><span class="va">dup_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_dup_id.html">get_dup_id</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">df_dup_id</span>, id_str <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span><span class="op">$</span><span class="va">replicated_id</span></span>
<span></span>
<span><span class="fu"><a href="reference/get_diff_cols.html">get_diff_cols</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df_dup_id</span>, id_str <span class="op">=</span> <span class="st">"id"</span>, id_num <span class="op">=</span> <span class="va">dup_id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="data-manipulation">Data manipulation<a class="anchor" aria-label="anchor" href="#data-manipulation"></a>
</h1>
<ul>
<li>
<code>get_unique_join</code>: Joins multiple tibbles and generates unique columns to record non-NA values when there are identical column names.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_unique_join.html">get_unique_join</a></span><span class="op">(</span>tibble_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fake_snacn_ph_wave3"</span>, <span class="st">"fake_snacn_ph_fu"</span><span class="op">)</span>,</span>
<span>               join_type <span class="op">=</span> <span class="st">"full_join"</span>,</span>
<span>               by_cols <span class="op">=</span> <span class="st">"Lopnr == N1lopnr, age"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="data-import-and-export">Data import and export<a class="anchor" aria-label="anchor" href="#data-import-and-export"></a>
</h1>
<ul>
<li>
<code>export_sav_to_csv</code>: Convert all the SPSS data files (<em>.sav</em>) to csv files. This conversion is needed because the maelstrom harmonization package does not read <em>.sav</em> data. This function can prevent repetitive work of converting <em>.sav</em> to <em>.csv</em> one by one.</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># convert SPSS files</span></span>
<span><span class="fu"><a href="reference/export_sav_to_csv.html">export_sav_to_csv</a></span><span class="op">(</span><span class="st">"original_data"</span>, <span class="st">"SNAC-K"</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>
<code>import_bulk</code>: Bulk import SPSS, STATA, rds, Rdata and MS Excel files to R global environment.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># bulk import</span></span>
<span><span class="va">db_dir</span> <span class="op">&lt;-</span> <span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"raw"</span>, <span class="st">"SNAC-K"</span><span class="op">)</span></span>
<span><span class="co"># this import all csv, sav and dta files in the 'db_dir'</span></span>
<span><span class="fu"><a href="reference/import_bulk.html">import_bulk</a></span><span class="op">(</span>data_dir <span class="op">=</span> <span class="va">db_dir</span><span class="op">)</span></span>
<span><span class="co"># this import only a specific type files</span></span>
<span><span class="fu"><a href="reference/import_bulk.html">import_bulk</a></span><span class="op">(</span>data_dir <span class="op">=</span> <span class="va">db_dir</span>, file_type <span class="op">=</span> <span class="st">"sav"</span><span class="op">)</span></span></code></pre></div>
<ul>
<li><em>To be continued….</em></li>
</ul>
</div>
<div class="section level1">
<h1 id="changelog">Changelog<a class="anchor" aria-label="anchor" href="#changelog"></a>
</h1>
<p>Please check <a href="https://github.com/Bolin-Wu/neartools/blob/master/NEWS.md" class="external-link">NEWS.md</a> for history updates.</p>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/Bolin-Wu/neartools/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/Bolin-Wu/neartools/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing neartools</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Bolin Wu <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/Bolin-Wu/neartools/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/Bolin-Wu/neartools/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/Bolin-Wu/neartools?branch=master" class="external-link"><img src="https://codecov.io/gh/Bolin-Wu/neartools/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bolin Wu.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
